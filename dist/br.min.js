/*! browserRequire 2015-03-08 */
!function(a){function b(){this._events={},this._run={},this._atOnce={},this._final={}}function c(){this._idCount=0,this._gatherData={},this.action=i}function d(){}function e(a){this._nexts=[];var b=new c;if(!a){this._publicData={gather:b},this._action=function(){};var d=this;b.action=function(a){d._action(a)}}this._args=[]}var f={paths:{},baseUrl:"",map:{},tempM:null,version:"browserRequire 1.0",br:{}},g="ready",h="error",i=function(){},j=function(a){return Object.prototype.toString.call(a).toLowerCase().replace(/(\[object )|(])/g,"")},k=Object.create||function(a){var b=i;return b.prototype=a,new b},l=function(a){return Array.prototype.slice.call(a)},m=function(){for(var a=l(arguments),b=a.splice(0,1)[0],c=0,d=a.length;d>c;c++)for(var e in a[c])b[e]=a[c][e];return b},n=function(a){return a.replace(/.js$/g,"")},o=function(a){return a.concat(".js")};b.prototype.bind=function(a,b,c){var d=this._atOnce[a],e=function(){b({eventName:a,bData:c,tData:d.tData})};if(d)return void(d.async?setTimeout(e,0):e());if(this._run[a])throw this._run[a]=0,"event running:"+a;var f=this,g=this._events[a]||function(){return f._events[a]=[],f._events[a]}();g.push({eventName:a,fun:b,bData:c})},b.prototype.trigger=function(a,b){var c=this._events[a]||[];this._run[a]=!0;for(var d=0,e=c.length;e>d;d++){var f=c[d];if(f){var g=f.fun({eventName:f.eventName,bData:f.bData,tData:b});if(0==g)return void(this._run[a]=!1)}}if(this._final[a]){var h=this._final[a]();0==h&&delete this._final[a]}this._run[a]=!1;var i=this._clones;if(i)for(var d=0;d<i.length;d++)i[d].trigger(a,b)},b.prototype.unbind=function(a,b){if(this._run[a])throw this._run[a]=0,"event running:"+a;if(a&&!b)return void(this._events[a]=[]);if(!a&&!b)return void(this._events={});for(var c=this._events[a],d=0,e=c.length;e>d;d++)if(b==c[d].fun){c.splice(d,1);break}},b.prototype.setOnce=function(a,b,c){this._atOnce[a]={tData:b,async:c}},b.prototype.last=function(a,b){this._final[a]=b},b.prototype.clone=function(){this._clones||(this._clones=[]);var a=new b;return this._clones.push(a),a._cSource=this,a},c.prototype.create=function(){var a=this,b=this._idCount,c=function(c){c&&(a._gatherData[b]=c),a._idCount--,a._idCount||a.action(a._gatherData)};return this._idCount++,c},d.prototype.ready=i,d.prototype.error=i,d.prototype.loading=i,e.prototype=k(d.prototype),e.prototype.require=function(){var a=new e(!0);a._publicData=this._publicData,a._subGather=this._publicData.gather.create(),a._args=l(arguments);var b=k(a);return b.previousRequire=this,this._nexts.push(b),b},e.prototype.end=function(){this.ready=i};var p={getScriptTag:function(a){a=o(n(a));var b=document.createElement("script");return b.type="text/javascript",b.setAttribute("async",!0),b.src=a,b},setModule:function(a,b){if(a){a=f.baseUrl.concat(a);var c=function(a,b){f.map[a]={type:2,module:b}};switch(j(a)){case"string":c(a,b);break;case"array":for(var d=0,e=a.length;e>d;d++)c(a[d],b)}}},setModuleAgent:function(a,b,c){a.type=2;var d,e=null;return f.tempM&&(d=f.tempM,e=d.lagGather,f.tempM=null,e&&(e.parentModule=c,e.runError=function(){a.type=3,b.trigger(h,{type:"error",path:c})})),e?void(e.action=function(){a.module=d.main,p.setModule(d.names,a.module),b.trigger(g,{type:"finish",path:c,module:a.module})}):(d&&(a.module=d.main,p.setModule(d.names,a.module)),void b.trigger(g,{type:"finish",path:c,module:a.module}))},loadModule:function(a){var c=p.getScriptTag(a),d=new b,e={type:1,loadEvent:d,script:c};return f.map[a]=e,c.onload=function(){p.setModuleAgent(e,d,a)},c.onerror=function(){e.type=3,d.trigger(h,{type:"error",path:a})},setTimeout(function(){document.getElementsByTagName("head")[0].appendChild(c)},0),d},loadAgent:function(a){var c=f.map[a]||{type:0},d="";switch(c.type){case 0:d=p.loadModule(a);break;case 1:d=c.loadEvent.clone();break;case 2:d=new b,d.setOnce(g,{type:"loaded",path:a,module:f.map[a].module},!0);break;case 3:d=new b,d.setOnce(h,{type:"error",path:a})}return d.eventType=c.type,d},getByPath:function(a){var b=f.paths[a]||a;return/.+:\/\//g.test(b)?b:f.baseUrl.concat(b)},argRequire:function(a){var d=new b,e=new c,i={succeedPaths:[],errorPaths:[],totalPaths:[]},j=!1;d.args=a;for(var k=0,l=a.length;l>k;k++)!function(b){var c=p.getByPath(a[b]),k=e.create(),l=p.loadAgent(c);l.path=c,l.uri=a[b],l.groupEvent=d;var n=function(a){var e={index:b,uri:c,type:a.tData.type};d.trigger("loading",m(e,i))};l.bind(g,function(a){i.succeedPaths.push(c),n(a),k({index:b,module:a.tData.module})}),l.last(g,function(){f.map[c]&&delete f.map[c].loadEvent}),l.bind(h,function(d){j=!0,i.errorPaths.push(c),console.log("error pathï¼š"+c+"\ngroup:"+a.toString()),n(d),k(b)}),i.totalPaths.push(c)}(k);return e.action=function(a){j?d.trigger("failure",m({descript:"failed to load"},i)):d.trigger("succeed",a)},d},assemblyRequire:function(a){var b=a._args,c=p.argRequire(b);c._combRequire=a,a._argEvent=c,c.bind("succeed",function(b){var c=[];for(var d in b.tData)c[b.tData[d].index]=b.tData[d].module;a.ready.apply(a,c);for(var e=a._nexts,d=0,f=e.length;f>d;d++)p.assemblyRequire(e[d]);a._subGather?a._subGather():a._action&&!a._nexts.length&&a._action()}),c.bind("failure",function(b){a.error(b.tData);var c=f.br.error;c&&c(b.tData),a._err&&a._err(b.tData)}),c.bind("loading",function(b){a.loading(b.tData)})},combinateRequire:function(a){var b=new e;b._args=l(a);var c=k(b);return setTimeout(function(){p.assemblyRequire(c)},0),[c,b]},require:function(){var a=p.combinateRequire(arguments)[0];return a},defindedRequire:function(){if(f.tempM){f.tempM.lagGather||(f.tempM.lagGather=new c);var a=f.tempM.lagGather,b=a.create(),d=p.combinateRequire(arguments),e=d[0],g=d[1];g._action=function(){b()},g._err=function(){for(var b=[],c=0,d=g._args.length;d>c;c++)b.push(p.getByPath(g._args[c]));var e={parentModule:a.parentModule,errorPaths:g._args,descript:"Sub module load error",paths:b};console.log(e),a.runError()}}else var e=p.combinateRequire(arguments)[0];return e},define:function(a,b){switch(f.tempM={main:""},j(a)){case"function":var c=k(window);f.tempM.main=a.call(c,p.defindedRequire);break;default:f.tempM.main=a}f.tempM.names=b}};p.define.br=!0;var q={config:function(a){var b={paths:{},baseUrl:""};m(b,a),f.paths=b.paths,f.baseUrl=b.baseUrl?b.baseUrl.concat("/"):""},extend:function(g,h){var i={Require:d,BindEvent:b,GatherFunction:c,CombRequire:e},q={getType:j,transArgumtnts:l,extend:m,getPath:n,concatJS:o,create:k};f.br[h]||(f.br[h]=!0),g(f,q,i,p,a)},use:function(a){if(f.map[a]&&2==f.map[a].type)return f.map[a].module;var b=p.getByPath(a);return f.map[b]&&2==f.map[b].type?f.map[b].module:void 0},has:function(a){return!!f.map[p.getByPath(a)]},destory:function(a){a=p.getByPath(a),f.map[a].script.remove(),delete f.map[a]},version:f.version,br:f.br};m(p.require,q),m(p.defindedRequire,q);var r=a.require;r&&function(){q.config(r);var a=r.ready;setTimeout(function(){a&&function(){a()}()},0)}(),a.require=p.require,a.define=p.define}(this);